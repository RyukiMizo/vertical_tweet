<h1 class="first">縦文字変換</h1>


<textarea class="content1"></textarea><br>
<button class="btn btn-primary click">１</button>

  
<br>

<textarea id="txtbox" style="width:600px; height: 50px"; class="content2"></textarea><br />
<button class="btn btn-primary" onClick="quotes()">２</button>
<hr />
<div class="tweet_button">
  <a href="https://twitter.com/share" class="twitter-share-button tweet_button"{count} data-url="goo.gl/udj2qQ" data-text="blabla" data-size="large">ツイート</a>
</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<br>





<script>
  var toFullWidth = function(value) {
    if (!value) return value;
    return String(value).replace(/[!-~]/g, function(all) {
        return String.fromCharCode(all.charCodeAt(0) + 0xFEE0);
    });
  };
  $(".click").click(function(){
    var con = $(".content1").val();
    con = con.split(/\n/g);
    
    var max_vert = Math.max.apply(null,con.map(function(value){
      return (value.length);
    }));
    
    var e = "";
    
    for(var i=0;  i < max_vert;  i++){
      for (var p = con.length - 1; p > -1; p--) {
        var content = con[p];
        if(content.length === 0){
          e += "　"
        }else{
          var one_char = content.split("")[i];
          
          if(one_char !== undefined){
            e += one_char
          }else{
            e += "　"
          }
        }
      }
      e += "\n"
    }
    var k = toFullWidth(e)+"\n"+"https://vertical-tweet.herokuapp.com/"+"\n"+"#縦文字変換";
    k = k.replace("ー", "│").replace("）", "︶").replace("（", "⌒")
    $(".content2").text(k);
  });
</script>

<script>
  
function quotes() {
  var txt = document.querySelector('.content2').value;
  var tbutton = document.querySelector('.twitter-share-button');
  
  tbutton.parentNode.removeChild(tbutton);
  
  var newA = document.createElement('a');
  newA.setAttribute('href', 'https://twitter.com/share');
  newA.setAttribute('class', 'twitter-share-button');
  newA.setAttribute('data-url', 'goo.gl/udj2qQ');
  newA.setAttribute('data-text', txt);
  newA.setAttribute('data-size', 'large');
  document.body.appendChild(newA);
  twttr.widgets.load();
}
</script>

